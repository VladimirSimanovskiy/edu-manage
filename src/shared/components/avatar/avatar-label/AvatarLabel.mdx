import { Canvas, Meta, Controls, Description } from "@storybook/blocks";
import * as AvatarLabelStories from "./AvatarLabel.stories";

<Meta of={AvatarLabelStories} />

# AvatarLabel

`AvatarLabel` - компонент для отображения аватара с именем, описанием и индикатором статуса.

- Автоматически располагает элементы в правильном порядке
- Легко расширяется собственными компонентами
- Порядок дочерних компонентов в коде не важен

[Ссылка на Figma](https://www.figma.com/design/lc2aOtrukFLJQwxxgH3Cgm/UI-kit?node-id=23748-10570&m=dev)

### Базовое использование

<Canvas of={AvatarLabelStories.Basic} />

```tsx
import {
	AvatarLabel,
	AvatarLabelAvatar,
	AvatarLabelTitle,
	AvatarLabelDescription,
	AvatarImage,
	AvatarFallback
} from "ics-ui-kit/components/avatar";

export const Basic = () => {
	return (
		<AvatarLabel>
			<AvatarLabelAvatar>
				<AvatarImage src="https://github.com/shadcn.png" />
				<AvatarFallback>CN</AvatarFallback>
			</AvatarLabelAvatar>
			<AvatarLabelTitle>John Doe</AvatarLabelTitle>
			<AvatarLabelDescription>Software Engineer</AvatarLabelDescription>
		</AvatarLabel>
	);
};
```

### Свойства

<Controls />

### Доступные дочерние компоненты AvatarLabel

- `AvatarLabelAvatar` - аватар
- `AvatarLabelIndicator` - индикатор статуса
- `AvatarLabelTitle` - заголовок
- `AvatarLabelDescription` - описание

### С иконкой

<Canvas of={AvatarLabelStories.Image} />

### С индикатором статуса

<Canvas of={AvatarLabelStories.WithIndicator} />

### С обратным порядком

<Canvas of={AvatarLabelStories.RevertOrder} />

### Создание кастомных компонентов

Вы можете создавать собственные индикаторы статуса, заголовки, описания и даже аватары. Например:

- **Индикаторы статуса**: "В сети", "Отпуск", "Занят", "Отсутствует"
- **Социальные индикаторы**: Telegram, WhatsApp
- **Кастомные заголовки**: с иконками, цветным текстом
- **Специальные аватары**: с анимацией, дополнительными элементами

#### Как создать кастомный компонент

Для создания любого кастомного компонента нужно:

1. Создать компонент с типизацией `AvatarLabelChild`
2. Добавить статическое свойство `componentType` (`"avatar"`, `"indicator"`, `"title"`, `"description"`)

Пример:

```tsx
export const AvatarLabelCustomIndicator: React.FC<AvatarLabelCustomIndicatorProps> = ({ ...props }) => {
	const { size } = useAvatarLabelContext();
	return <SomeCustomIndicator size={size} />;
} as AvatarLabelChild<AvatarLabelCustomIndicatorProps>; // Типизируем компонент

AvatarLabelCustomIndicator.componentType = "indicator"; // Указываем тип компонента
```

### Пример с кастомным Telegram индикатором

<Canvas of={AvatarLabelStories.TelegramIndicator} />

```tsx
import React from "react";
import { Indicator } from "ics-ui-kit/components/indicator";
import {
	AvatarLabel,
	AvatarLabelAvatar,
	AvatarLabelTitle,
	AvatarLabelDescription,
	AvatarImage,
	AvatarFallback,
	useAvatarLabelContext,
	AvatarLabelChild
} from "ics-ui-kit/components/avatar";

type TelegramIndicatorProps = React.ComponentPropsWithoutRef<typeof Indicator>;

const AvatarTelegramIndicator = React.forwardRef<React.ElementRef<typeof Indicator>, TelegramIndicatorProps>(
	({ ...props }, ref) => {
		const { size } = useAvatarLabelContext();

		const telegramIcon = (
			<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24">
				{/* SVG content */}
			</svg>
		);

		return (
			<Indicator ref={ref} size={size} rounded {...props}>
				{telegramIcon}
			</Indicator>
		);
	}
) as AvatarLabelChild<TelegramIndicatorProps>;

// Важно: добавляем статическое свойство для типизации
AvatarTelegramIndicator.componentType = "indicator";
AvatarTelegramIndicator.displayName = "AvatarTelegramIndicator";

export const Basic = () => {
	return (
		<AvatarLabel>
			<AvatarLabelTitle>Alice Johnson</AvatarLabelTitle>
			<AvatarLabelDescription>Product Manager</AvatarLabelDescription>
			<AvatarLabelAvatar>
				<AvatarImage src="https://github.com/alice.png" />
				<AvatarFallback>AJ</AvatarFallback>
			</AvatarLabelAvatar>
			<AvatarTelegramIndicator />
		</AvatarLabel>
	);
};
```

#### Доступные типы компонентов

- `"avatar"` - аватары (отображаются в блоке слева)
- `"indicator"` - индикаторы (позиционируются поверх аватара)
- `"title"` - заголовки (отображаются в текстовом блоке)
- `"description"` - описания (отображаются в текстовом блоке)

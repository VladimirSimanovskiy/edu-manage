import { Canvas, Meta, Controls, Description } from "@storybook/blocks";
import * as SheetStories from "./Sheet.stories";

<Meta of={SheetStories} />

# Sheet

`Sheet` - это компонент для отображения выдвижных панелей, предоставляет гибкий и доступный способ отображения контента с боковой стороны интерфейса.

- Основан на [Radix UI Dialog](https://www.radix-ui.com/primitives/docs/components/dialog)
- Поддерживает различные направления выдвижения (сверху, снизу, слева, справа)
- Правильно управляет фокусом
- Поддерживает навигацию с клавиатуры
- Правильно обрабатывает закрытие по Escape и клику вне панели

## Структура компонента

Sheet состоит из следующих подкомпонентов:

- `Sheet` - основной компонент выдвижной панели
- `SheetTrigger` - триггер для открытия панели
- `SheetPortal` - портал для рендеринга панели
- `SheetOverlay` - оверлей панели
- `SheetContent` - контент панели
- `SheetTitle` - заголовок панели
- `SheetDescription` - описание панели
- `SheetHeader` - заголовочная секция панели
- `SheetFooter` - нижняя секция панели
- `SheetClose` - компонент для закрытия панели

### Базовое использование

<Canvas of={SheetStories.Default} />

```tsx
import {
	Sheet,
	SheetContent,
	SheetTrigger,
	SheetHeader,
	SheetTitle,
	SheetDescription,
	SheetFooter,
	SheetClose
} from "ics-ui-kit/components/sheet";
import { Button } from "ics-ui-kit/components/button";
import { Input } from "ics-ui-kit/components/input";
import { Label } from "ics-ui-kit/components/label";
import { FormStack, FormBody } from "ics-ui-kit/components/form";

export const Basic = () => {
	return (
		<Sheet>
			<SheetTrigger asChild>
				<Button variant="outline">Открыть панель</Button>
			</SheetTrigger>
			<SheetContent>
				<SheetHeader>
					<SheetTitle>Редактировать профиль</SheetTitle>
					<SheetDescription>
						Внесите изменения в ваш профиль. Нажмите сохранить когда закончите.
					</SheetDescription>
				</SheetHeader>
				<FormBody>
					<FormStack>
						<Field title="Имя" labelClassName="w-20" control={() => <TextInput placeholder="Email" />} />
						<Field
							title="Username"
							labelClassName="w-20"
							control={() => <TextInput placeholder="Email" />}
						/>
					</FormStack>
				</FormBody>
				<SheetFooter>
					<Button type="submit">Сохранить изменения</Button>
					<SheetClose asChild>
						<Button variant="outline">Закрыть</Button>
					</SheetClose>
				</SheetFooter>
			</SheetContent>
		</Sheet>
	);
};
```

### Направления выдвижения

Sheet поддерживает четыре направления выдвижения через свойство `side`:

- `right` (по умолчанию) - выдвижение справа
- `left` - выдвижение слева
- `top` - выдвижение сверху
- `bottom` - выдвижение снизу

<Canvas of={SheetStories.SheetSides} />

```tsx
<SheetContent side="left">{/* содержимое панели */}</SheetContent>
```

### Панель без кнопки закрытия

Чтобы скрыть кнопку закрытия, можно использовать свойство `showCloseButton` в компоненте `SheetContent`.

<Canvas of={SheetStories.WithoutCloseButton} />

```tsx
<SheetContent showCloseButton={false}>...</SheetContent>
```

### Панель с кастомной кнопкой закрытия

Чтобы использовать кастомную кнопку закрытия, можно использовать компонент `SheetClose` в компоненте `SheetContent`.

<Canvas of={SheetStories.WithCustomCloseButton} />

```tsx
import { X } from "lucide-react";

<SheetContent showCloseButton={false}>
	<SheetHeader>
		<SheetTitle>Кастомная кнопка закрытия</SheetTitle>
		<SheetDescription>Эта панель использует кастомную кнопку закрытия</SheetDescription>
		<SheetClose className="absolute right-4 top-4 rounded-sm opacity-70">
			<X className="h-4 w-4" />
		</SheetClose>
	</SheetHeader>
	...
</SheetContent>;
```

### Панель без закрытия по бэкдропу

Чтобы предотвратить закрытие панели при клике на затемненную область (бэкдроп), можно использовать свойство `onInteractOutside` в компоненте `SheetContent`.

<Canvas of={SheetStories.WithoutBackdropClose} />

```tsx
<SheetContent
	onInteractOutside={(event) => {
		event.preventDefault(); // ⛔ предотвращает закрытие по клику на бэкдроп
	}}
>
	{/* содержимое панели */}
</SheetContent>
```

### Кастомизация оверлея

Sheet поддерживает кастомизацию оверлея через свойства `overlayBlur` и `overlayType` в компоненте `SheetContent`:

- `overlayBlur` - добавляет размытие фона (backdrop-blur)
- `overlayType` - тип оверлея:
    - `default` (по умолчанию) - темный полупрозрачный фон
    - `gradient` - градиентный фон
    - `transparent` - прозрачный фон

<Canvas of={SheetStories.CustomOverlay} />

```tsx
<Sheet>
	<SheetTrigger>Открыть</SheetTrigger>
	<SheetContent overlayBlur overlayType="gradient">
		{/* содержимое панели */}
	</SheetContent>
</Sheet>
```
